<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Editar Evento</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Lexend+Deca&family=Roboto:wght@100&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        />
        <link rel="stylesheet" type="text/css" href="/css/styles.css" />
        <link rel="stylesheet" type="text/css" href="/css/create.css" />
    </head>
    <body>
        <%- include("../partials/header");%>
        <main class="form-container">
            <h1 class="form-title">Editar Evento</h1>
            <form
                action="/products/<%= event.id %>?_method=PUT"
                method="POST"
                enctype="multipart/form-data"
                class="form-box"
            >
                <div class="form-group">
                    <label for="title" class="form-label">Título</label>
                    <input
                        type="text"
                        id="title"
                        name="title"
                        value="<%= event.title %>"
                        class="form-input"
                        required
                        minlength="5"
                    />
                </div>

                <div class="form-group">
                    <label for="image" class="form-label">Imagen</label>
                    <input
                        type="file"
                        id="image"
                        name="image"
                        accept="image/*"
                        class="form-input"
                    />
                    <img
                        id="image-preview"
                        src="/img/products/<%= event.image %>"
                        alt="FOTO-PRODUCTO"
                        class="foto-producto"
                    />
                </div>

                <div class="form-group">
                    <label for="city" class="form-label">Ciudad</label>
                    <input
                        type="text"
                        id="city"
                        name="city"
                        class="form-input"
                        value="<%= event.city %>"
                        required
                    />

                </div>
             <div class="form-group">
             <label for="description" class="form-label">Descripción</label>
             <textarea
                      id="description"
                      name="description"
                      class="form-input"
                      required
                      minlength="20"
              ><%= event.description %></textarea>
              </div>

                <div class="form-group">
                    <label for="place" class="form-label">Lugar</label>
                    <input
                        type="text"
                        id="place"
                        name="place"
                        class="form-input"
                        value="<%= event.place %>"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="address" class="form-label">Direccion</label>
                    <input
                        type="text"
                        id="address"
                        name="address"
                        class="form-input"
                        value="<%= event.address %>"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="date" class="form-label">Fecha</label>
                    <input
                        type="date"
                        id="date"
                        name="date"
                        value="<%= event.date %>"
                        class="form-input"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="type" class="form-label">Tipo</label>
                    <input
                        type="text"
                        id="type"
                        name="type"
                        class="form-input"
                        value="<%= event.type %>"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="price" class="form-label">Precio</label>
                    <input
                        type="number"
                        id="price"
                        name="price"
                        min="0"
                        step="0.01"
                        class="form-input"
                        value="<%= event.price %>"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="availables" class="form-label"
                        >Cantidad disponible</label
                    >
                    <input
                        type="number"
                        id="availables"
                        name="availables"
                        min="0"
                        class="form-input"
                        value="<%= event.availables %>"
                        required
                    />
                </div>

                <button type="submit" class="form-button">
                    Guardar Cambios
                </button>
            </form>
        </main>
        <%- include("../partials/footer"); %>

        <script>
            const imageInput = document.getElementById("image");
            const imagePreview = document.getElementById("image-preview");

            imageInput.addEventListener("change", function (event) {
                const selectedImage = event.target.files[0];
                if (selectedImage) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        imagePreview.src = e.target.result;
                        imagePreview.style.display = "block";
                    };
                    reader.readAsDataURL(selectedImage);
                } else {
                    imagePreview.style.display = "none";
                }
            });
        </script>
    </body>
</html>
